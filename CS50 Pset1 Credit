#include <cs50.h>
#include <stdio.h>

int calculate(long x);

int main(void)
{
    //Ask for a credit card number
 long number;
 int a, b, c;
        number = get_long("Credit card number: \n");
        a = number / 1e14;
        b = number / 1e13;
        c = number / 1e11;

    // Check sum
    
    int calc = calculate(number) % 10;
    
    // Check card type

    if ((a == 34 || a == 37) && calc == 0)
    {
        printf("American Express\n");
    }
    else if (b >= 51 && b <= 55 && calc == 0)
    {
        printf("MasterCard\n");
    }
    else if ((a >= 40 || c >= 40) && calc == 0)
    {
        printf("VISA\n");
    }
else
printf("INVALID\n");
}

int calculate(long x)
{
    int d, e, sum, f, ff;
        f = 0;
        ff = 0;
        e = 1;
        do
        {
            d = x % 10;
            if (e % 2 != 0)
            {
                ff = ff + d;
            }
            else
            {
                d = d * 2;
                if (d >= 10)
                {
                    f = f + (1 + d % 10);
                }
                else
                {
                f = f + d;
                }
            }
            e = e + 1;
            x = x / 10;
        }
        while (x > 0);
        sum = f + ff;
        return sum;
}
